{"version":3,"sources":["webpack:///webpack/bootstrap 6cb90f2cbf1c4611d2fc","webpack:///./src/main.js","webpack:///./src/main.scss","webpack:///./src/js/ImageProcessor.js","webpack:///./src/js/FaceMess.js","webpack:///./src/js/Utils.js"],"names":["canvas","FaceMess","createWithImage","extractFacialFeature","ImageProcessor","getImageData","getContext","width","height","rgb2gray","imageData","data","i","dataLength","length","getPixelValue","position","constructor","context","greyScaleCanvas","cloneNode","featureCanvas","greyScaleContext","featureContext","createById","id","document","getElementById","src","canvasObject","drawImage","image","Image","onload","greyScaleImageData","pixelValues","console","log","getLBPOfPixel","p","r","centerPosition","sum","difference","getNeighbourPosition","unitStep","Math","pow","point","coordinate","getCoordinate","get1DPosition","x","floor","round","cos","PI","y","sin","POINT_8","RADIUS_1","NEIGHBOUR_SHIFT","n","colLength"],"mappings":"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","file":"app.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 6cb90f2cbf1c4611d2fc","import FaceMess from \"./js/FaceMess\";\n\nlet canvas = FaceMess.createWithImage('image', 'images/cham11ng.jpg');\ncanvas.extractFacialFeature();\n\n// let duplicate = canvas.cloneNode(true);\n\n// let imagePixels = [];\n// ImageProcessor.rgb2gray(duplicate);\n\n/*\nfunction greyscaleImage(context) {\n  let imageData = context.getImageData(0, 0, canvas.width, canvas.height);\n  let data = imageData.data; // object.assign\n  let imagePixels = [];\n\n  for (let i = 0, dataLength = data.length; i < dataLength; i += 4) {\n    let brightness = (data[i] + data[i + 1] + data[i + 2]) / 3;\n    data[i] = brightness; // red\n    data[i + 1] = brightness; // green\n    data[i + 2] = brightness; // blue\n    imagePixels[i % 4] = brightness;\n  }\n  context.putImageData(imageData, 0, 0);\n\n  return imagePixels;\n}\n\nfunction getLBPFeature(data, P, R, centerX, centerY) {\n  let sum = 0;\n\n  for (let i = 0; i < 8; i++) {\n    console.log(getCorrespondingPoints(8, 1, 1, 1, i));\n  }\n\n  let pixelValues = [5, 4, 3, 4, 3, 1, 2, 0, 3];\n  for (let i = 0; i < P - 1; i++) {\n    sum += unitStep(grayValueOfNeighbourPoint() - pixelValues[getCorrespondingPoints(P8, R1, )]) * Math.pow(2, i);\n  }\n  return sum;\n}\n\nfunction getCorrespondingPoints(p, r, x, y, point) {\n  return {\n    x: x + r * Math.floor(Math.round(Math.cos(2 * Math.PI * (point - 3) / p))),\n    y: y + r * Math.floor(Math.round(Math.sin(2 * Math.PI * (point - 3) / p)))\n  };\n}\n*/\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/main.scss\n// module id = 3\n// module chunks = 0","class ImageProcessor {\n  static getImageData(canvas) {\n    return canvas.getContext(\"2d\").getImageData(0, 0, canvas.width, canvas.height);\n  }\n\n  static rgb2gray(imageData) {\n    let data = imageData.data;\n    for (let i = 0, dataLength = data.length; i < dataLength; i += 4) {\n      data[i] = data[i + 1] = data[i + 2] = data[i] * 0.3 + data[i + 1] * 0.59 + data[i + 2] * 0.11;\n    }\n\n    return imageData;\n  }\n\n  static getPixelValue(imageData, position) {\n    return imageData.data[position * 4];\n  }\n}\n\nexport default ImageProcessor;\n\n\n// WEBPACK FOOTER //\n// ./src/js/ImageProcessor.js","import ImageProcessor from \"./ImageProcessor\";\nimport {POINT_8, RADIUS_1, NEIGHBOUR_SHIFT, unitStep, get1DPosition, getCoordinate} from \"./Utils\";\n\nclass FaceMess {\n  constructor(canvas) {\n    this.canvas = canvas;\n    this.context = this.canvas.getContext('2d');\n    this.greyScaleCanvas = this.canvas.cloneNode(true);\n    this.featureCanvas = this.canvas.cloneNode(true);\n    this.greyScaleContext = this.greyScaleCanvas.getContext('2d');\n    this.featureContext = this.featureCanvas.getContext('2d');\n    this.height = this.canvas.height;\n    this.width = this.canvas.width;\n  }\n\n  static createById(id) {\n    return new FaceMess(document.getElementById(id));\n  }\n\n  static createWithImage(id, src) {\n    let canvasObject = FaceMess.createById(id);\n    canvasObject.drawImage(src);\n\n    return canvasObject;\n  }\n\n  drawImage(src) {\n    let image = new Image();\n    image.src = src;\n    image.onload = () => {\n      this.context.drawImage(image, 0, 0, this.height, this.width);\n      this.greyScaleContext.drawImage(this.canvas, 0, 0);\n      this.featureContext.drawImage(this.greyScaleCanvas, 0, 0);\n    };\n  }\n\n  extractFacialFeature() {\n    let greyScaleImageData = ImageProcessor.getImageData(this.greyScaleCanvas);\n    greyScaleImageData = ImageProcessor.rgb2gray(greyScaleImageData);\n\n    let pixelValues = [137, 135, 115, 99, 82, 79, 70, 54, 45];\n    console.log(this.getLBPOfPixel(pixelValues, POINT_8, RADIUS_1, 4));\n    /*for (let i = 0; i < this.width * this.height; i += 4) {\n\n    }*/\n  }\n\n  getLBPOfPixel(data, p, r, centerPosition) {\n    let sum = 0;\n    for (let i = 0; i < p; i++) {\n      let difference = data[this.getNeighbourPosition(p, r, centerPosition, i)] - data[centerPosition];\n      sum += unitStep(difference) * Math.pow(2, (p - i - 1) % p);\n    }\n\n    return sum;\n  }\n\n  getNeighbourPosition(p, r, centerPosition, point) {\n    let coordinate = getCoordinate(3, centerPosition);\n\n    return get1DPosition(\n      3,\n      coordinate.x + r * Math.floor(Math.round(Math.cos(2 * Math.PI * (point - NEIGHBOUR_SHIFT) / p))),\n      coordinate.y + r * Math.floor(Math.round(Math.sin(2 * Math.PI * (point - NEIGHBOUR_SHIFT) / p)))\n    );\n  }\n}\n\nexport default FaceMess;\n\n\n// WEBPACK FOOTER //\n// ./src/js/FaceMess.js","export const POINT_8 = 8;\nexport const RADIUS_1 = 1;\nexport const NEIGHBOUR_SHIFT = 3;\n\nexport function unitStep(n) {\n  if (n < 0) {\n    return 0;\n  } else if (n >= 0) {\n    return 1;\n  }\n}\n\nexport function get1DPosition(colLength, x, y) {\n  return x + y * colLength;\n}\n\nexport function getCoordinate(colLength, position) {\n  return {\n    x: position % colLength,\n    y: Math.floor(position / colLength)\n  };\n}\n\n\n// WEBPACK FOOTER //\n// ./src/js/Utils.js"],"sourceRoot":""}